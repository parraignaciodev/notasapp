import{a as Q,b as W,c as U,d as R,e as $,f as G,g as K,h as X,m as Y,p as Z,q as ee,v as te}from"./chunk-BU72SXHL.js";import"./chunk-TULZT7AD.js";import"./chunk-QUJFQN2Y.js";import"./chunk-L5S773JO.js";import"./chunk-5UNEUROJ.js";import"./chunk-WNM3ARYN.js";import"./chunk-D44B6OBF.js";import"./chunk-3DZE6HYZ.js";import"./chunk-QJ4IY6VE.js";import"./chunk-7FY2OE2O.js";import"./chunk-VZWFDDCM.js";import"./chunk-QN35TEHR.js";import"./chunk-PROODDEW.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-GCDSLC6N.js";import"./chunk-CKP3SGE2.js";import"./chunk-3K7YJ3LB.js";import{a as ne}from"./chunk-Y2LFUXSS.js";import{a as J}from"./chunk-RJXKT5RK.js";import"./chunk-7H446SA7.js";import{$ as E,A as f,D as h,E as n,F as o,G as v,M as C,N as y,O as b,V as S,Va as z,W as k,X as I,Xa as L,Z as c,_ as u,aa as T,ba as F,ca as H,cb as j,da as N,ga as D,ja as V,ka as q,l as m,m as g,ma as x,na as B,ra as A,s,u as p,w}from"./chunk-HWGQXR5V.js";import"./chunk-KPGGMEWE.js";import"./chunk-ACKNUHJB.js";import"./chunk-OPMMEZOP.js";import"./chunk-RARK2NDR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as P,b as M,e as O}from"./chunk-JHI3MBHO.js";function ie(r,_){r&1&&v(0,"ion-icon",28)}function re(r,_){if(r&1){let e=C();n(0,"div",19),y("click",function(){let i=m(e).$implicit,a=b(2);return g(a.verDetalle(i))}),n(1,"div",20)(2,"div",21)(3,"h2",22),c(4),o(),f(5,ie,1,0,"ion-icon",23),o(),n(6,"p",24),c(7),o(),n(8,"div",25)(9,"span",26),c(10),o(),n(11,"span",27),c(12),o()()()()}if(r&2){let e=_.$implicit,t=b(2);k("--note-color",t.getNoteBg(e.color)),s(4),u(e.titulo),s(),h("ngIf",e.completada),s(2),u(e.descripcion),s(3),u(t.formatFechaHora(e.updatedAt||e.createdAt)),s(),I("done",e.completada),s(),E(" ",e.completada?"Listo":"Pendiente"," ")}}function ae(r,_){if(r&1&&(n(0,"div",17),f(1,re,13,9,"div",18),o()),r&2){let e=b();s(),h("ngForOf",e.tareasFiltradas)}}function ce(r,_){r&1&&(n(0,"div",29),v(1,"img",30),n(2,"h3"),c(3,"No hay nada por aqu\xED"),o(),n(4,"p"),c(5,"Toca el bot\xF3n + para crear una nota"),o()())}var se={sun:"var(--note-sun)",sky:"var(--note-sky)",mint:"var(--note-mint)",lavender:"var(--note-lavender)",peach:"var(--note-peach)",gray:"var(--note-gray)"},ye=(()=>{class r{constructor(e,t,i,a){this.router=e,this.authService=t,this.datePipe=i,this.sqlite=a,this.tareas=[],this.nombreUsuario="",this.query="",this.palette=["sun","sky","mint","lavender","peach","gray"]}ngOnInit(){this.cargarTareas(),this.authService.usuario$.subscribe(e=>{this.nombreUsuario=e??""})}ionViewWillEnter(){return O(this,null,function*(){if(this.cargarTareas(),this.sqlite.isNative)try{let e=yield this.sqlite.list();console.log("[SQLite] Notas en tabla notes:",e)}catch(e){console.error("[SQLite] Error al listar notas",e)}else console.log("[SQLite] Ejecutando en web, usando solo localStorage por ahora")})}getNoteBg(e){return se[e||"gray"]}cargarTareas(){let e=localStorage.getItem("tareas"),t=e?JSON.parse(e):[],i=t.map(a=>{let l=a.createdAt??new Date().toISOString(),d=a.updatedAt??l,oe=a.color??"gray";return M(P({},a),{createdAt:l,updatedAt:d,color:oe})});JSON.stringify(t)!==JSON.stringify(i)&&localStorage.setItem("tareas",JSON.stringify(i)),this.tareas=i}get tareasFiltradas(){let e=this.query.trim().toLowerCase();return e?this.tareas.filter(t=>(t.titulo||"").toLowerCase().includes(e)||(t.descripcion||"").toLowerCase().includes(e)):this.tareas}formatFechaHora(e){let t=e?new Date(e):new Date;return this.datePipe.transform(t,"MMM d, HH:mm","es-CL")??""}verDetalle(e){this.router.navigate(["/detalle-tarea",e.id])}irAgregar(){this.router.navigate(["/agregar-tarea"])}cerrarSesion(){this.authService.logout(),this.router.navigate(["/login"])}colorClass(e){return`note--${e.color??"gray"}`}static{this.\u0275fac=function(t){return new(t||r)(p(A),p(J),p(x),p(ne))}}static{this.\u0275cmp=w({type:r,selectors:[["app-home"]],features:[N([x])],decls:24,vars:4,consts:[["sinTareas",""],[1,"ion-no-border"],[1,"glass-header"],["size","large",1,"main-title"],["slot","end"],["color","primary",2,"font-weight","600",3,"click"],["fullscreen","",1,"ion-padding","home-content"],[1,"welcome-section","animate-entry"],[1,"greeting"],[1,"username"],[1,"subtitle"],[1,"search-container","animate-entry",2,"animation-delay","0.1s"],["placeholder","Buscar en tus notas...","debounce","150","showCancelButton","focus",1,"custom-search",3,"ngModelChange","ngModel"],["class","notes-grid animate-entry","style","animation-delay: 0.2s;",4,"ngIf","ngIfElse"],["vertical","bottom","horizontal","end","slot","fixed",1,"custom-fab"],["color","primary",3,"click"],["name","add"],[1,"notes-grid","animate-entry",2,"animation-delay","0.2s"],["class","note-card custom-card",3,"--note-color","click",4,"ngFor","ngForOf"],[1,"note-card","custom-card",3,"click"],[1,"note-content"],[1,"note-header"],[1,"note-title"],["name","checkmark-circle","color","success",4,"ngIf"],[1,"note-desc"],[1,"note-footer"],[1,"note-date"],[1,"status-badge"],["name","checkmark-circle","color","success"],[1,"empty-state","animate-entry",2,"animation-delay","0.2s"],["src","assets/icon/favicon.png","alt","No notes",1,"empty-img",2,"opacity","0.5","width","80px","filter","grayscale(1)"]],template:function(t,i){if(t&1){let a=C();n(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-title",3),c(3,"Mis Notas"),o(),n(4,"ion-buttons",4)(5,"ion-button",5),y("click",function(){return m(a),g(i.cerrarSesion())}),c(6," Salir "),o()()()(),n(7,"ion-content",6)(8,"div",7)(9,"h1",8),c(10,"Hola, "),n(11,"span",9),c(12),o(),c(13," \u{1F44B}"),o(),n(14,"p",10),c(15,"\xBFQu\xE9 tienes en mente hoy?"),o()(),n(16,"div",11)(17,"ion-searchbar",12),H("ngModelChange",function(d){return m(a),F(i.query,d)||(i.query=d),g(d)}),o()(),f(18,ae,2,1,"div",13)(19,ce,6,0,"ng-template",null,0,D),n(21,"ion-fab",14)(22,"ion-fab-button",15),y("click",function(){return m(a),g(i.irAgregar())}),v(23,"ion-icon",16),o()()()}if(t&2){let a=S(20);s(12),u(i.nombreUsuario),s(5),T("ngModel",i.query),s(),h("ngIf",i.tareasFiltradas.length>0)("ngIfElse",a)}},dependencies:[B,V,q,te,W,U,R,$,G,K,X,Y,Z,ee,Q,j,z,L],styles:[".home-content[_ngcontent-%COMP%]{--background: var(--ion-background-color)}.main-title[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-text-color);letter-spacing:-.5px}.welcome-section[_ngcontent-%COMP%]{margin-bottom:24px;padding:0 8px}.greeting[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0;color:var(--ion-text-color)}.greeting[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.subtitle[_ngcontent-%COMP%]{font-size:16px;color:var(--ion-color-medium);margin-top:4px}.search-container[_ngcontent-%COMP%]{margin-bottom:24px}.custom-search[_ngcontent-%COMP%]{--background: #fff;--placeholder-color: var(--ion-color-medium);--icon-color: var(--ion-color-primary);padding-inline-start:0;padding-inline-end:0}body.dark[_ngcontent-%COMP%]   .custom-search[_ngcontent-%COMP%]{--background: #2a2a2a}.notes-grid[_ngcontent-%COMP%]{column-count:2;column-gap:16px;padding-bottom:80px}.note-card[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:16px;background-color:var(--note-color, #fff);border:1px solid rgba(0,0,0,.03);position:relative}.note-card[_ngcontent-%COMP%]:not([style*=--note-color]){background-color:var(--ion-card-background)}.note-content[_ngcontent-%COMP%]{padding:16px}.note-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.note-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0;color:#333;line-height:1.3}body.dark[_ngcontent-%COMP%]   .note-card[_ngcontent-%COMP%]:not([style*=--note-color])   .note-title[_ngcontent-%COMP%]{color:var(--ion-text-color)}.note-desc[_ngcontent-%COMP%]{font-size:14px;color:#000000b3;margin:0 0 12px;line-height:1.5;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden}body.dark[_ngcontent-%COMP%]   .note-card[_ngcontent-%COMP%]:not([style*=--note-color])   .note-desc[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.note-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:12px}.note-date[_ngcontent-%COMP%]{color:#00000080}body.dark[_ngcontent-%COMP%]   .note-card[_ngcontent-%COMP%]:not([style*=--note-color])   .note-date[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;background:#0000000d;color:#0009;font-weight:500}.status-badge.done[_ngcontent-%COMP%]{background:var(--ion-color-success);color:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;margin-top:60px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (min-width: 768px){.notes-grid[_ngcontent-%COMP%]{column-count:3}}@media (min-width: 1024px){.notes-grid[_ngcontent-%COMP%]{column-count:4}}"]})}}return r})();export{ye as HomePage};
