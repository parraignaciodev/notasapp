import{a as j,b as q,c as B,d as J,g as L,h as R,i as H,j as $,k as K,o as Q,p as U,q as W,r as X,u as Y,v as Z}from"./chunk-BU72SXHL.js";import"./chunk-TULZT7AD.js";import"./chunk-QUJFQN2Y.js";import"./chunk-L5S773JO.js";import"./chunk-5UNEUROJ.js";import"./chunk-WNM3ARYN.js";import"./chunk-D44B6OBF.js";import"./chunk-3DZE6HYZ.js";import"./chunk-QJ4IY6VE.js";import"./chunk-7FY2OE2O.js";import"./chunk-VZWFDDCM.js";import"./chunk-QN35TEHR.js";import"./chunk-PROODDEW.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-GCDSLC6N.js";import"./chunk-CKP3SGE2.js";import"./chunk-3K7YJ3LB.js";import{A as p,D as s,E as i,F as r,G as u,M as P,N as h,O as g,Ua as f,Va as w,Wa as N,X as y,Y as O,Ya as D,Z as c,Za as G,_a as V,bb as z,db as A,ja as T,ka as k,l as C,m as E,na as M,pa as S,ra as F,s as l,u as m,w as I}from"./chunk-HWGQXR5V.js";import"./chunk-KPGGMEWE.js";import"./chunk-ACKNUHJB.js";import"./chunk-OPMMEZOP.js";import"./chunk-RARK2NDR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as b,b as v,e as x}from"./chunk-JHI3MBHO.js";function tt(o,d){o&1&&(i(0,"span"),c(1,"El t\xEDtulo es obligatorio."),r())}function et(o,d){o&1&&(i(0,"span"),c(1,"M\xEDnimo 3 caracteres."),r())}function nt(o,d){o&1&&(i(0,"span"),c(1,"No puede ser solo espacios."),r())}function ot(o,d){if(o&1&&(i(0,"div",19),p(1,tt,2,0,"span",20)(2,et,2,0,"span",20)(3,nt,2,0,"span",20),r()),o&2){let e,t,n,a=g();l(),s("ngIf",(e=a.tareaForm.get("titulo"))==null||e.errors==null?null:e.errors.required),l(),s("ngIf",(t=a.tareaForm.get("titulo"))==null||t.errors==null?null:t.errors.minlength),l(),s("ngIf",(n=a.tareaForm.get("titulo"))==null||n.errors==null?null:n.errors.soloEspacios)}}function rt(o,d){o&1&&(i(0,"span"),c(1,"La descripci\xF3n es obligatoria."),r())}function at(o,d){o&1&&(i(0,"span"),c(1,"M\xEDnimo 5 caracteres."),r())}function it(o,d){o&1&&(i(0,"span"),c(1,"No puede ser solo espacios."),r())}function lt(o,d){if(o&1&&(i(0,"div",19),p(1,rt,2,0,"span",20)(2,at,2,0,"span",20)(3,it,2,0,"span",20),r()),o&2){let e,t,n,a=g();l(),s("ngIf",(e=a.tareaForm.get("descripcion"))==null||e.errors==null?null:e.errors.required),l(),s("ngIf",(t=a.tareaForm.get("descripcion"))==null||t.errors==null?null:t.errors.minlength),l(),s("ngIf",(n=a.tareaForm.get("descripcion"))==null||n.errors==null?null:n.errors.soloEspacios)}}function st(o,d){o&1&&u(0,"ion-icon",23)}function ct(o,d){if(o&1){let e=P();i(0,"button",21),h("click",function(){let n=C(e).$implicit,a=g();return E(a.setColor(n))}),u(1,"span"),p(2,st,1,0,"ion-icon",22),r()}if(o&2){let e=d.$implicit,t=g();y("selected",t.tareaForm.value.color===e),l(),O("dot "+e),l(),s("ngIf",t.tareaForm.value.color===e)}}var bt=(()=>{class o{constructor(e,t,n,a){this.fb=e,this.route=t,this.router=n,this.toastCtrl=a,this.palette=["sun","sky","mint","lavender","peach","gray"]}ngOnInit(){this.tareaForm=this.fb.group({titulo:["",[f.required,f.minLength(3),this.noSoloEspacios]],descripcion:["",[f.required,f.minLength(5),this.noSoloEspacios]],color:["sun"]}),this.tareaId=Number(this.route.snapshot.paramMap.get("id"));let t=JSON.parse(localStorage.getItem("tareas")||"[]").find(n=>n.id===this.tareaId);if(!t){this.mostrarToast("No se encontr\xF3 la tarea para editar","danger"),this.router.navigate(["/home"]);return}this.tareaForm.patchValue({titulo:t.titulo,descripcion:t.descripcion,color:t.color||"sun"})}noSoloEspacios(e){return(e.value||"").trim().length===0?{soloEspacios:!0}:null}setColor(e){return x(this,null,function*(){this.tareaForm.patchValue({color:e});let t=JSON.parse(localStorage.getItem("tareas")||"[]"),n=t.findIndex(a=>a.id===this.tareaId);n!==-1&&(t[n]=v(b({},t[n]),{color:e,updatedAt:new Date().toISOString()}),localStorage.setItem("tareas",JSON.stringify(t)),(yield this.toastCtrl.create({message:"Color actualizado",duration:900})).present())})}guardarCambios(){return x(this,null,function*(){if(this.tareaForm.invalid){this.tareaForm.markAllAsTouched();return}let e=JSON.parse(localStorage.getItem("tareas")||"[]"),t=e.findIndex(n=>n.id===this.tareaId);if(t===-1){this.mostrarToast("Error al guardar: tarea no encontrada","danger");return}e[t]=v(b({},e[t]),{titulo:this.tareaForm.value.titulo,descripcion:this.tareaForm.value.descripcion,color:this.tareaForm.value.color,updatedAt:new Date().toISOString()}),localStorage.setItem("tareas",JSON.stringify(e)),yield this.mostrarToast("Tarea actualizada exitosamente","success"),this.router.navigate(["/detalle-tarea",this.tareaId])})}mostrarToast(e,t="dark"){return x(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:1500,color:t})).present()})}static{this.\u0275fac=function(t){return new(t||o)(m(z),m(S),m(F),m(Y))}}static{this.\u0275cmp=I({type:o,selectors:[["app-editar-tarea"]],decls:28,vars:5,consts:[[1,"ion-no-border"],[1,"glass-header"],["slot","start"],["defaultHref","/home","color","primary","text",""],[1,"main-title"],[1,"ion-padding","form-content"],[1,"custom-form","animate-entry",3,"formGroup"],[1,"input-group"],[1,"input-label"],["lines","none",1,"custom-input"],["formControlName","titulo","placeholder","Escribe un t\xEDtulo..."],["class","error-msg",4,"ngIf"],["lines","none",1,"custom-input","textarea-input"],["formControlName","descripcion","rows","6","placeholder","Escribe los detalles..."],[1,"color-section"],[1,"color-row"],["type","button","class","color-swatch",3,"selected","click",4,"ngFor","ngForOf"],[1,"actions"],["expand","block",1,"save-btn",3,"click","disabled"],[1,"error-msg"],[4,"ngIf"],["type","button",1,"color-swatch",3,"click"],["name","checkmark",4,"ngIf"],["name","checkmark"]],template:function(t,n){if(t&1&&(i(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),u(3,"ion-back-button",3),r(),i(4,"ion-title",4),c(5,"Editar Nota"),r()()(),i(6,"ion-content",5)(7,"form",6)(8,"div",7)(9,"ion-label",8),c(10,"T\xEDtulo"),r(),i(11,"ion-item",9),u(12,"ion-input",10),r(),p(13,ot,4,3,"div",11),r(),i(14,"div",7)(15,"ion-label",8),c(16,"Descripci\xF3n"),r(),i(17,"ion-item",12),u(18,"ion-textarea",13),r(),p(19,lt,4,3,"div",11),r(),i(20,"div",14)(21,"ion-label",8),c(22,"Color de etiqueta"),r(),i(23,"div",15),p(24,ct,3,5,"button",16),r()(),i(25,"div",17)(26,"ion-button",18),h("click",function(){return n.guardarCambios()}),c(27," Guardar Cambios "),r()()()()),t&2){let a,_;l(7),s("formGroup",n.tareaForm),l(6),s("ngIf",((a=n.tareaForm.get("titulo"))==null?null:a.touched)&&((a=n.tareaForm.get("titulo"))==null?null:a.errors)),l(6),s("ngIf",((_=n.tareaForm.get("descripcion"))==null?null:_.touched)&&((_=n.tareaForm.get("descripcion"))==null?null:_.errors)),l(5),s("ngForOf",n.palette),l(2),s("disabled",n.tareaForm.invalid)}},dependencies:[M,T,k,Z,q,B,J,L,R,H,$,K,Q,U,W,j,X,A,D,w,N,G,V],styles:[".form-content[_ngcontent-%COMP%]{--background: var(--ion-background-color)}.main-title[_ngcontent-%COMP%]{font-weight:700;letter-spacing:-.5px}.custom-form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.input-group[_ngcontent-%COMP%]{margin-bottom:24px}.input-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:var(--ion-color-medium);margin-bottom:8px;margin-left:4px}.custom-input[_ngcontent-%COMP%]{--background: #fff;--border-radius: 12px;--padding-start: 16px;--inner-padding-end: 16px;box-shadow:0 2px 8px #00000008;border:1px solid rgba(0,0,0,.05)}.custom-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .custom-input[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px}body.dark[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--background: #2a2a2a;border:1px solid rgba(255,255,255,.05)}.textarea-input[_ngcontent-%COMP%]{align-items:flex-start}.error-msg[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-danger);margin-top:6px;margin-left:4px;display:flex;align-items:center;gap:4px}.color-section[_ngcontent-%COMP%]{margin-bottom:32px}.color-row[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;padding:4px}.color-swatch[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:2px solid transparent;background:transparent;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;position:relative}.color-swatch.selected[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);transform:scale(1.1)}.color-swatch[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#333;opacity:.7}.dot[_ngcontent-%COMP%]{position:absolute;inset:4px;border-radius:50%}.dot.sun[_ngcontent-%COMP%]{background-color:#fff4cc;background-color:var(--note-sun)}.dot.sky[_ngcontent-%COMP%]{background-color:#e6f2ff;background-color:var(--note-sky)}.dot.mint[_ngcontent-%COMP%]{background-color:#e7fff2;background-color:var(--note-mint)}.dot.lavender[_ngcontent-%COMP%]{background-color:#efe9ff;background-color:var(--note-lavender)}.dot.peach[_ngcontent-%COMP%]{background-color:#ffe9df;background-color:var(--note-peach)}.dot.gray[_ngcontent-%COMP%]{background-color:#f2f3f5;background-color:var(--note-gray)}.save-btn[_ngcontent-%COMP%]{--box-shadow: 0 8px 20px rgba(98, 0, 238, .3);margin-top:16px;height:52px;font-size:16px}"]})}}return o})();export{bt as EditarTareaPage};
