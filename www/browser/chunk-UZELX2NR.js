import{b as a,t as i}from"./chunk-APMANMIP.js";var h=(()=>{class s{constructor(){this.usuarioSubject=new a(null),this.usuario$=this.usuarioSubject.asObservable(),this.usuariosKey="usuarios",this.usuarioActualKey="usuarioActual",this.cargarUsuarioDesdeStorage()}norm(r){return(r||"").trim().toLowerCase()}obtenerUsuarios(){let r=localStorage.getItem(this.usuariosKey);try{return r?JSON.parse(r):[]}catch{return[]}}guardarUsuarios(r){localStorage.setItem(this.usuariosKey,JSON.stringify(r))}registrarUsuario(r,t){let o=this.obtenerUsuarios(),u=this.norm(r);return o.find(e=>e.nombre===u)?!1:(o.push({nombre:u,clave:t}),this.guardarUsuarios(o),!0)}validarUsuario(r,t){let o=this.norm(r),e=this.obtenerUsuarios().find(n=>n.nombre===o);return!!e&&e.clave===t}login(r){let t=this.norm(r);this.usuarioSubject.next(t),localStorage.setItem(this.usuarioActualKey,t)}logout(){this.usuarioSubject.next(null),localStorage.removeItem(this.usuarioActualKey)}cargarUsuarioDesdeStorage(){let r=localStorage.getItem(this.usuarioActualKey);this.usuarioSubject.next(r)}isLoggedIn(){return this.usuarioSubject.value!==null}clearAll(){localStorage.removeItem(this.usuariosKey),localStorage.removeItem(this.usuarioActualKey)}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=i({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{h as a};
