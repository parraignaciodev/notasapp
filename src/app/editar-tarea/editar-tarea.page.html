<ion-header class="ion-no-border">
  <ion-toolbar class="glass-header">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" color="primary" text=""></ion-back-button>
    </ion-buttons>
    <ion-title class="main-title">Editar Nota</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding form-content">
  <form [formGroup]="tareaForm" class="custom-form animate-entry">

    <!-- Campo: T칤tulo -->
    <div class="input-group">
      <ion-label class="input-label">T칤tulo</ion-label>
      <ion-item lines="none" class="custom-input">
        <ion-input formControlName="titulo" placeholder="Escribe un t칤tulo..."></ion-input>
      </ion-item>
      <div class="error-msg" *ngIf="tareaForm.get('titulo')?.touched && tareaForm.get('titulo')?.errors">
        <span *ngIf="tareaForm.get('titulo')?.errors?.['required']">El t칤tulo es obligatorio.</span>
        <span *ngIf="tareaForm.get('titulo')?.errors?.['minlength']">M칤nimo 3 caracteres.</span>
        <span *ngIf="tareaForm.get('titulo')?.errors?.['soloEspacios']">No puede ser solo espacios.</span>
      </div>
    </div>

    <!-- Campo: Descripci칩n -->
    <div class="input-group">
      <ion-label class="input-label">Descripci칩n</ion-label>
      <ion-item lines="none" class="custom-input textarea-input">
        <ion-textarea formControlName="descripcion" rows="6" placeholder="Escribe los detalles..."></ion-textarea>
      </ion-item>
      <div class="error-msg" *ngIf="tareaForm.get('descripcion')?.touched && tareaForm.get('descripcion')?.errors">
        <span *ngIf="tareaForm.get('descripcion')?.errors?.['required']">La descripci칩n es obligatoria.</span>
        <span *ngIf="tareaForm.get('descripcion')?.errors?.['minlength']">M칤nimo 5 caracteres.</span>
        <span *ngIf="tareaForm.get('descripcion')?.errors?.['soloEspacios']">No puede ser solo espacios.</span>
      </div>
    </div>

    <!-- 游리 Selector de color -->
    <div class="color-section">
      <ion-label class="input-label">Color de etiqueta</ion-label>
      <div class="color-row">
        <button *ngFor="let c of palette" type="button" class="color-swatch"
          [class.selected]="tareaForm.value.color === c" (click)="setColor(c)">
          <span [class]="'dot ' + c"></span>
          <ion-icon name="checkmark" *ngIf="tareaForm.value.color === c"></ion-icon>
        </button>
      </div>
    </div>

    <!-- Bot칩n guardar -->
    <div class="actions">
      <ion-button expand="block" (click)="guardarCambios()" [disabled]="tareaForm.invalid" class="save-btn">
        Guardar Cambios
      </ion-button>
    </div>

  </form>
</ion-content>