{
  "version": 3,
  "sources": ["angular:jit:template:src\\app\\api-tareas\\api-tareas.page.html", "angular:jit:style:src\\app\\api-tareas\\api-tareas.page.scss", "src/app/api-tareas/api-tareas.page.ts", "src/app/api-tareas/api-tareas.page.spec.ts"],
  "sourcesContent": ["<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>API: Tareas remotas</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"cargar($event)\">\r\n    <ion-refresher-content></ion-refresher-content>\r\n  </ion-refresher>\r\n\r\n  <ion-list>\r\n    <ion-item lines=\"full\">\r\n      <ion-label>\r\n        <h2>Demo JSONPlaceholder</h2>\r\n        <p>GET / POST / PUT / DELETE + cache Storage</p>\r\n      </ion-label>\r\n      <ion-button slot=\"end\" size=\"small\" (click)=\"crearDemo()\">\r\n        Crear demo\r\n      </ion-button>\r\n    </ion-item>\r\n\r\n    <ion-item *ngIf=\"cargando\">\r\n      <ion-label>Cargando...</ion-label>\r\n      <ion-spinner slot=\"end\"></ion-spinner>\r\n    </ion-item>\r\n\r\n    <ion-item *ngFor=\"let t of tareas\">\r\n      <ion-checkbox\r\n        slot=\"start\"\r\n        [checked]=\"t.completed\"\r\n        (ionChange)=\"toggleCompleta(t)\"\r\n      ></ion-checkbox>\r\n\r\n      <ion-label>\r\n        <h2>{{ t.title }}</h2>\r\n        <p>ID: {{ t.id }} \u00B7 user: {{ t.userId }}</p>\r\n      </ion-label>\r\n\r\n      <ion-button\r\n        fill=\"clear\"\r\n        color=\"danger\"\r\n        slot=\"end\"\r\n        (click)=\"eliminar(t)\"\r\n      >\r\n        <ion-icon name=\"trash\"></ion-icon>\r\n      </ion-button>\r\n    </ion-item>\r\n  </ion-list>\r\n</ion-content>\r\n", "/* src/app/api-tareas/api-tareas.page.scss */\n/*# sourceMappingURL=api-tareas.page.css.map */\n", "// src/app/api-tareas/api-tareas.page.ts\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule, ToastController, IonList } from '@ionic/angular';\r\nimport { ApiTareasService, ApiTarea } from '../services/api-tareas';\r\n\r\n@Component({\r\n  selector: 'app-api-tareas',\r\n  standalone: true,\r\n  imports: [CommonModule, IonicModule],\r\n  templateUrl: './api-tareas.page.html',\r\n  styleUrls: ['./api-tareas.page.scss'],\r\n})\r\nexport class ApiTareasPage implements OnInit {\r\n  tareas: ApiTarea[] = [];\r\n  cargando = false;\r\n\r\n  constructor(\r\n    private api: ApiTareasService,\r\n    private toastCtrl: ToastController\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.cargar();\r\n  }\r\n\r\n  async cargar(event?: any) {\r\n    this.cargando = true;\r\n    this.api.getTareas().subscribe({\r\n      next: data => {\r\n        // para no llenar la pantalla, tomamos solo las primeras 10\r\n        this.tareas = data.slice(0, 10);\r\n        this.cargando = false;\r\n        event?.target?.complete();\r\n      },\r\n      error: async err => {\r\n        this.cargando = false;\r\n        event?.target?.complete();\r\n        const t = await this.toastCtrl.create({\r\n          message: String(err),\r\n          duration: 2500,\r\n          color: 'danger',\r\n        });\r\n        t.present();\r\n      },\r\n    });\r\n  }\r\n\r\n  async crearDemo() {\r\n    const nueva: ApiTarea = {\r\n      title: 'Nueva tarea demo',\r\n      completed: false,\r\n      userId: 1,\r\n    };\r\n\r\n    this.api.createTarea(nueva).subscribe({\r\n      next: async res => {\r\n        this.tareas.unshift(res);\r\n        const t = await this.toastCtrl.create({\r\n          message: 'Tarea demo creada (finge en la API)',\r\n          duration: 2000,\r\n          color: 'success',\r\n        });\r\n        t.present();\r\n      },\r\n      error: async err => {\r\n        const t = await this.toastCtrl.create({\r\n          message: String(err),\r\n          duration: 2500,\r\n          color: 'danger',\r\n        });\r\n        t.present();\r\n      },\r\n    });\r\n  }\r\n\r\n  toggleCompleta(t: ApiTarea) {\r\n    const actualizado: ApiTarea = { ...t, completed: !t.completed };\r\n    if (!t.id) return;\r\n\r\n    this.api.updateTarea(t.id, actualizado).subscribe({\r\n      next: async res => {\r\n        Object.assign(t, res);\r\n        const toast = await this.toastCtrl.create({\r\n          message: 'Estado actualizado (PUT demo)',\r\n          duration: 2000,\r\n          color: 'medium',\r\n        });\r\n        toast.present();\r\n      },\r\n      error: async err => {\r\n        const ttoast = await this.toastCtrl.create({\r\n          message: String(err),\r\n          duration: 2500,\r\n          color: 'danger',\r\n        });\r\n        ttoast.present();\r\n      },\r\n    });\r\n  }\r\n\r\n  eliminar(t: ApiTarea) {\r\n    if (!t.id) return;\r\n    this.api.deleteTarea(t.id).subscribe({\r\n      next: async () => {\r\n        this.tareas = this.tareas.filter(x => x.id !== t.id);\r\n        const toast = await this.toastCtrl.create({\r\n          message: 'Eliminado (DELETE demo)',\r\n          duration: 2000,\r\n          color: 'warning',\r\n        });\r\n        toast.present();\r\n      },\r\n      error: async err => {\r\n        const ttoast = await this.toastCtrl.create({\r\n          message: String(err),\r\n          duration: 2500,\r\n          color: 'danger',\r\n        });\r\n        ttoast.present();\r\n      },\r\n    });\r\n  }\r\n}\r\n", "import { ComponentFixture, TestBed } from '@angular/core/testing';\r\nimport { ApiTareasPage } from './api-tareas.page';\r\nimport { ApiTareasService } from '../services/api-tareas';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { of } from 'rxjs';\r\n\r\ndescribe('ApiTareasPage', () => {\r\n  let component: ApiTareasPage;\r\n  let fixture: ComponentFixture<ApiTareasPage>;\r\n\r\n  beforeEach(async () => {\r\n    const apiSpy = jasmine.createSpyObj('ApiTareasService', ['getTareas', 'createTarea', 'updateTarea', 'deleteTarea']);\r\n    apiSpy.getTareas.and.returnValue(of([]));\r\n\r\n    const toastSpy = jasmine.createSpyObj('ToastController', ['create']);\r\n    toastSpy.create.and.returnValue(Promise.resolve({ present: () => Promise.resolve() }));\r\n\r\n    await TestBed.configureTestingModule({\r\n      imports: [ApiTareasPage],\r\n      providers: [\r\n        { provide: ApiTareasService, useValue: apiSpy },\r\n        { provide: ToastController, useValue: toastSpy }\r\n      ]\r\n    }).compileComponents();\r\n\r\n    fixture = TestBed.createComponent(ApiTareasPage);\r\n    component = fixture.componentInstance;\r\n    fixture.detectChanges();\r\n  });\r\n\r\n  it('should create', () => {\r\n    expect(component).toBeTruthy();\r\n  });\r\n});\r\n"],
  "mappings": "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",
  "names": ["api_tareas_page_default", "init_api_tareas_page", "ApiTareasPage", "init_api_tareas_page"]
}
