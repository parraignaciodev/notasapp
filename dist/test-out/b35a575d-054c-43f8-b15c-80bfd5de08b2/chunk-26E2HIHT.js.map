{"version":3,"sources":["node_modules/@ionic/core/dist/esm/index-ceb5RaMT.js"],"sourcesContent":["/*!\n * (C) Ionic http://ionicframework.com - MIT License\n */\nimport { d as doc } from './index-ZjP4CjeZ.js';\nimport { q as pointerCoord } from './helpers-DEn3pfjm.js';\nimport './index-C8IsBmNU.js';\n\nconst startTapClick = (config) => {\n    if (doc === undefined) {\n        return;\n    }\n    let lastActivated = 0;\n    let activatableEle;\n    let activeRipple;\n    let activeDefer;\n    const useRippleEffect = config.getBoolean('animated', true) && config.getBoolean('rippleEffect', true);\n    const clearDefers = new WeakMap();\n    const cancelActive = () => {\n        if (activeDefer)\n            clearTimeout(activeDefer);\n        activeDefer = undefined;\n        if (activatableEle) {\n            removeActivated(false);\n            activatableEle = undefined;\n        }\n    };\n    const pointerDown = (ev) => {\n        // Ignore right clicks\n        if (activatableEle || ev.button === 2) {\n            return;\n        }\n        setActivatedElement(getActivatableTarget(ev), ev);\n    };\n    const pointerUp = (ev) => {\n        setActivatedElement(undefined, ev);\n    };\n    const setActivatedElement = (el, ev) => {\n        // do nothing\n        if (el && el === activatableEle) {\n            return;\n        }\n        if (activeDefer)\n            clearTimeout(activeDefer);\n        activeDefer = undefined;\n        const { x, y } = pointerCoord(ev);\n        // deactivate selected\n        if (activatableEle) {\n            if (clearDefers.has(activatableEle)) {\n                throw new Error('internal error');\n            }\n            if (!activatableEle.classList.contains(ACTIVATED)) {\n                addActivated(activatableEle, x, y);\n            }\n            removeActivated(true);\n        }\n        // activate\n        if (el) {\n            const deferId = clearDefers.get(el);\n            if (deferId) {\n                clearTimeout(deferId);\n                clearDefers.delete(el);\n            }\n            el.classList.remove(ACTIVATED);\n            const callback = () => {\n                addActivated(el, x, y);\n                activeDefer = undefined;\n            };\n            if (isInstant(el)) {\n                callback();\n            }\n            else {\n                activeDefer = setTimeout(callback, ADD_ACTIVATED_DEFERS);\n            }\n        }\n        activatableEle = el;\n    };\n    const addActivated = (el, x, y) => {\n        lastActivated = Date.now();\n        el.classList.add(ACTIVATED);\n        if (!useRippleEffect)\n            return;\n        const rippleEffect = getRippleEffect(el);\n        if (rippleEffect !== null) {\n            removeRipple();\n            activeRipple = rippleEffect.addRipple(x, y);\n        }\n    };\n    const removeRipple = () => {\n        if (activeRipple !== undefined) {\n            activeRipple.then((remove) => remove());\n            activeRipple = undefined;\n        }\n    };\n    const removeActivated = (smooth) => {\n        removeRipple();\n        const active = activatableEle;\n        if (!active) {\n            return;\n        }\n        const time = CLEAR_STATE_DEFERS - Date.now() + lastActivated;\n        if (smooth && time > 0 && !isInstant(active)) {\n            const deferId = setTimeout(() => {\n                active.classList.remove(ACTIVATED);\n                clearDefers.delete(active);\n            }, CLEAR_STATE_DEFERS);\n            clearDefers.set(active, deferId);\n        }\n        else {\n            active.classList.remove(ACTIVATED);\n        }\n    };\n    doc.addEventListener('ionGestureCaptured', cancelActive);\n    doc.addEventListener('pointerdown', pointerDown, true);\n    doc.addEventListener('pointerup', pointerUp, true);\n    /**\n     * Tap click effects such as the ripple effect should\n     * not happen when scrolling. For example, if a user scrolls\n     * the page but also happens to do a touchstart on a button\n     * as part of the scroll, the ripple effect should not\n     * be dispatched. The ripple effect should only happen\n     * if the button is activated and the page is not scrolling.\n     *\n     * pointercancel is dispatched on a gesture when scrolling\n     * starts, so this lets us avoid having to listen for\n     * ion-content's scroll events.\n     */\n    doc.addEventListener('pointercancel', cancelActive, true);\n};\n// TODO(FW-2832): type\nconst getActivatableTarget = (ev) => {\n    if (ev.composedPath !== undefined) {\n        /**\n         * composedPath returns EventTarget[]. However,\n         * objects other than Element can be targets too.\n         * For example, AudioContext can be a target. In this\n         * case, we know that the event is a UIEvent so we\n         * can assume that the path will contain either Element\n         * or ShadowRoot.\n         */\n        const path = ev.composedPath();\n        for (let i = 0; i < path.length - 2; i++) {\n            const el = path[i];\n            if (!(el instanceof ShadowRoot) && el.classList.contains('ion-activatable')) {\n                return el;\n            }\n        }\n    }\n    else {\n        return ev.target.closest('.ion-activatable');\n    }\n};\nconst isInstant = (el) => {\n    return el.classList.contains('ion-activatable-instant');\n};\nconst getRippleEffect = (el) => {\n    if (el.shadowRoot) {\n        const ripple = el.shadowRoot.querySelector('ion-ripple-effect');\n        if (ripple) {\n            return ripple;\n        }\n    }\n    return el.querySelector('ion-ripple-effect');\n};\nconst ACTIVATED = 'ion-activated';\nconst ADD_ACTIVATED_DEFERS = 100;\nconst CLEAR_STATE_DEFERS = 150;\n\nexport { startTapClick };\n"],"mappings":"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","names":[],"x_google_ignoreList":[0]}