{
  "version": 3,
  "sources": ["src/app/services/auth.service.spec.ts"],
  "sourcesContent": ["import { TestBed } from '@angular/core/testing';\r\nimport { AuthService } from './auth.service';\r\n\r\ndescribe('AuthService', () => {\r\n  let service: AuthService;\r\n\r\n  beforeEach(() => {\r\n    TestBed.configureTestingModule({});\r\n    service = TestBed.inject(AuthService);\r\n\r\n    // Limpiar espías anteriores si los hubiera\r\n    // En Jasmine los espías se limpian automáticamente por spec, \r\n    // pero debemos definirlos aquí para interceptar las llamadas.\r\n    spyOn(localStorage, 'setItem');\r\n    spyOn(localStorage, 'removeItem');\r\n    // No espiamos getItem aquí porque se usa en el constructor, \r\n    // y ya se ejecutó al hacer inject.\r\n  });\r\n\r\n  it('should be created', () => {\r\n    expect(service).toBeTruthy();\r\n  });\r\n\r\n  it('login() should save session', () => {\r\n    const username = 'testuser';\r\n\r\n    // Act\r\n    service.login(username);\r\n\r\n    // Assert\r\n    // Verifica que se guardó en localStorage\r\n    expect(localStorage.setItem).toHaveBeenCalledWith('usuarioActual', 'testuser');\r\n\r\n    // Verifica que el observable emita el valor\r\n    service.usuario$.subscribe(user => {\r\n      expect(user).toBe('testuser');\r\n    });\r\n  });\r\n\r\n  it('logout() should clear session', () => {\r\n    // Arrange\r\n    service.login('testuser'); // Primero logueamos\r\n\r\n    // Act\r\n    service.logout();\r\n\r\n    // Assert\r\n    // Verifica que se eliminó de localStorage\r\n    expect(localStorage.removeItem).toHaveBeenCalledWith('usuarioActual');\r\n\r\n    // Verifica que el observable sea null\r\n    service.usuario$.subscribe(user => {\r\n      expect(user).toBeNull();\r\n    });\r\n  });\r\n});\r\n"],
  "mappings": ";;;;;;;;;;;AAAA;AACA;AAEA,SAAS,eAAe,MAAK;AAC3B,MAAI;AAEJ,aAAW,MAAK;AACd,YAAQ,uBAAuB,CAAA,CAAE;AACjC,cAAU,QAAQ,OAAO,WAAW;AAKpC,UAAM,cAAc,SAAS;AAC7B,UAAM,cAAc,YAAY;EAGlC,CAAC;AAED,KAAG,qBAAqB,MAAK;AAC3B,WAAO,OAAO,EAAE,WAAU;EAC5B,CAAC;AAED,KAAG,+BAA+B,MAAK;AACrC,UAAM,WAAW;AAGjB,YAAQ,MAAM,QAAQ;AAItB,WAAO,aAAa,OAAO,EAAE,qBAAqB,iBAAiB,UAAU;AAG7E,YAAQ,SAAS,UAAU,UAAO;AAChC,aAAO,IAAI,EAAE,KAAK,UAAU;IAC9B,CAAC;EACH,CAAC;AAED,KAAG,iCAAiC,MAAK;AAEvC,YAAQ,MAAM,UAAU;AAGxB,YAAQ,OAAM;AAId,WAAO,aAAa,UAAU,EAAE,qBAAqB,eAAe;AAGpE,YAAQ,SAAS,UAAU,UAAO;AAChC,aAAO,IAAI,EAAE,SAAQ;IACvB,CAAC;EACH,CAAC;AACH,CAAC;",
  "names": []
}
