{
  "version": 3,
  "sources": ["angular:jit:template:src\\app\\editar-tarea\\editar-tarea.page.html", "angular:jit:style:src\\app\\editar-tarea\\editar-tarea.page.scss", "src/app/editar-tarea/editar-tarea.page.ts", "src/app/editar-tarea/editar-tarea.page.spec.ts"],
  "sourcesContent": ["<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar class=\"glass-header\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/home\" color=\"primary\" text=\"\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title class=\"main-title\">Editar Nota</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding form-content\">\r\n  <form [formGroup]=\"tareaForm\" class=\"custom-form animate-entry\">\r\n\r\n    <!-- Campo: T\u00EDtulo -->\r\n    <div class=\"input-group\">\r\n      <ion-label class=\"input-label\">T\u00EDtulo</ion-label>\r\n      <ion-item lines=\"none\" class=\"custom-input\">\r\n        <ion-input formControlName=\"titulo\" placeholder=\"Escribe un t\u00EDtulo...\"></ion-input>\r\n      </ion-item>\r\n      <div class=\"error-msg\" *ngIf=\"tareaForm.get('titulo')?.touched && tareaForm.get('titulo')?.errors\">\r\n        <span *ngIf=\"tareaForm.get('titulo')?.errors?.['required']\">El t\u00EDtulo es obligatorio.</span>\r\n        <span *ngIf=\"tareaForm.get('titulo')?.errors?.['minlength']\">M\u00EDnimo 3 caracteres.</span>\r\n        <span *ngIf=\"tareaForm.get('titulo')?.errors?.['soloEspacios']\">No puede ser solo espacios.</span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Campo: Descripci\u00F3n -->\r\n    <div class=\"input-group\">\r\n      <ion-label class=\"input-label\">Descripci\u00F3n</ion-label>\r\n      <ion-item lines=\"none\" class=\"custom-input textarea-input\">\r\n        <ion-textarea formControlName=\"descripcion\" rows=\"6\" placeholder=\"Escribe los detalles...\"></ion-textarea>\r\n      </ion-item>\r\n      <div class=\"error-msg\" *ngIf=\"tareaForm.get('descripcion')?.touched && tareaForm.get('descripcion')?.errors\">\r\n        <span *ngIf=\"tareaForm.get('descripcion')?.errors?.['required']\">La descripci\u00F3n es obligatoria.</span>\r\n        <span *ngIf=\"tareaForm.get('descripcion')?.errors?.['minlength']\">M\u00EDnimo 5 caracteres.</span>\r\n        <span *ngIf=\"tareaForm.get('descripcion')?.errors?.['soloEspacios']\">No puede ser solo espacios.</span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- \uD83D\uDFE1 Selector de color -->\r\n    <div class=\"color-section\">\r\n      <ion-label class=\"input-label\">Color de etiqueta</ion-label>\r\n      <div class=\"color-row\">\r\n        <button *ngFor=\"let c of palette\" type=\"button\" class=\"color-swatch\"\r\n          [class.selected]=\"tareaForm.value.color === c\" (click)=\"setColor(c)\">\r\n          <span [class]=\"'dot ' + c\"></span>\r\n          <ion-icon name=\"checkmark\" *ngIf=\"tareaForm.value.color === c\"></ion-icon>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Bot\u00F3n guardar -->\r\n    <div class=\"actions\">\r\n      <ion-button expand=\"block\" (click)=\"guardarCambios()\" [disabled]=\"tareaForm.invalid\" class=\"save-btn\">\r\n        Guardar Cambios\r\n      </ion-button>\r\n    </div>\r\n\r\n  </form>\r\n</ion-content>", "/* src/app/editar-tarea/editar-tarea.page.scss */\n.form-content {\n  --background: var(--ion-background-color);\n}\n.main-title {\n  font-weight: 700;\n  letter-spacing: -0.5px;\n}\n.custom-form {\n  max-width: 600px;\n  margin: 0 auto;\n}\n.input-group {\n  margin-bottom: 24px;\n}\n.input-label {\n  display: block;\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--ion-color-medium);\n  margin-bottom: 8px;\n  margin-left: 4px;\n}\n.custom-input {\n  --background: #fff;\n  --border-radius: 12px;\n  --padding-start: 16px;\n  --inner-padding-end: 16px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n}\n.custom-input ion-input,\n.custom-input ion-textarea {\n  --padding-top: 12px;\n  --padding-bottom: 12px;\n}\nbody.dark .custom-input {\n  --background: #2a2a2a;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n.textarea-input {\n  align-items: flex-start;\n}\n.error-msg {\n  font-size: 12px;\n  color: var(--ion-color-danger);\n  margin-top: 6px;\n  margin-left: 4px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.color-section {\n  margin-bottom: 32px;\n}\n.color-row {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  padding: 4px;\n}\n.color-swatch {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  border: 2px solid transparent;\n  background: transparent;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n}\n.color-swatch.selected {\n  border-color: var(--ion-color-primary);\n  transform: scale(1.1);\n}\n.color-swatch ion-icon {\n  font-size: 24px;\n  color: #333;\n  opacity: 0.7;\n}\n.dot {\n  position: absolute;\n  top: 4px;\n  left: 4px;\n  right: 4px;\n  bottom: 4px;\n  border-radius: 50%;\n}\n.dot.sun {\n  background-color: #fff4cc;\n  background-color: var(--note-sun);\n}\n.dot.sky {\n  background-color: #e6f2ff;\n  background-color: var(--note-sky);\n}\n.dot.mint {\n  background-color: #e7fff2;\n  background-color: var(--note-mint);\n}\n.dot.lavender {\n  background-color: #efe9ff;\n  background-color: var(--note-lavender);\n}\n.dot.peach {\n  background-color: #ffe9df;\n  background-color: var(--note-peach);\n}\n.dot.gray {\n  background-color: #f2f3f5;\n  background-color: var(--note-gray);\n}\n.save-btn {\n  --box-shadow: 0 8px 20px rgba(98, 0, 238, 0.3);\n  margin-top: 16px;\n  height: 52px;\n  font-size: 16px;\n}\n/*# sourceMappingURL=editar-tarea.page.css.map */\n", "import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormBuilder, FormGroup, Validators, AbstractControl, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule, ToastController } from '@ionic/angular';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\ntype NoteColorKey = 'sun' | 'sky' | 'mint' | 'lavender' | 'peach' | 'gray';\r\n\r\n@Component({\r\n  selector: 'app-editar-tarea',\r\n  standalone: true,\r\n  imports: [CommonModule, IonicModule, ReactiveFormsModule],\r\n  templateUrl: './editar-tarea.page.html',\r\n  styleUrls: ['./editar-tarea.page.scss']\r\n})\r\nexport class EditarTareaPage implements OnInit {\r\n  tareaForm!: FormGroup;\r\n  tareaId!: number;\r\n  palette: NoteColorKey[] = ['sun', 'sky', 'mint', 'lavender', 'peach', 'gray'];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private toastCtrl: ToastController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.tareaForm = this.fb.group({\r\n      titulo: ['', [Validators.required, Validators.minLength(3), this.noSoloEspacios]],\r\n      descripcion: ['', [Validators.required, Validators.minLength(5), this.noSoloEspacios]],\r\n      color: ['sun' as NoteColorKey]\r\n    });\r\n\r\n    this.tareaId = Number(this.route.snapshot.paramMap.get('id'));\r\n    const tareasGuardadas: any[] = JSON.parse(localStorage.getItem('tareas') || '[]');\r\n    const tarea = tareasGuardadas.find((t: any) => t.id === this.tareaId);\r\n\r\n    if (!tarea) {\r\n      this.mostrarToast('No se encontró la tarea para editar', 'danger');\r\n      this.router.navigate(['/home']);\r\n      return;\r\n    }\r\n\r\n    this.tareaForm.patchValue({\r\n      titulo: tarea.titulo,\r\n      descripcion: tarea.descripcion,\r\n      color: (tarea.color as NoteColorKey) || 'sun'\r\n    });\r\n  }\r\n\r\n  noSoloEspacios(control: AbstractControl) {\r\n    const value = control.value || '';\r\n    return value.trim().length === 0 ? { soloEspacios: true } : null;\r\n  }\r\n\r\n  // Actualiza el color al instante y persiste en localStorage\r\n  async setColor(c: NoteColorKey) {\r\n    this.tareaForm.patchValue({ color: c });\r\n\r\n    const tareas: any[] = JSON.parse(localStorage.getItem('tareas') || '[]');\r\n    const i = tareas.findIndex((t: any) => t.id === this.tareaId);\r\n    if (i === -1) return;\r\n\r\n    tareas[i] = { ...tareas[i], color: c, updatedAt: new Date().toISOString() };\r\n    localStorage.setItem('tareas', JSON.stringify(tareas));\r\n\r\n    (await this.toastCtrl.create({ message: 'Color actualizado', duration: 900 })).present();\r\n  }\r\n\r\n  async guardarCambios() {\r\n    if (this.tareaForm.invalid) {\r\n      this.tareaForm.markAllAsTouched();\r\n      return;\r\n    }\r\n\r\n    const tareasGuardadas: any[] = JSON.parse(localStorage.getItem('tareas') || '[]');\r\n    const index = tareasGuardadas.findIndex((t: any) => t.id === this.tareaId);\r\n\r\n    if (index === -1) {\r\n      this.mostrarToast('Error al guardar: tarea no encontrada', 'danger');\r\n      return;\r\n    }\r\n\r\n    tareasGuardadas[index] = {\r\n      ...tareasGuardadas[index],\r\n      titulo: this.tareaForm.value.titulo,\r\n      descripcion: this.tareaForm.value.descripcion,\r\n      color: this.tareaForm.value.color, // por si cambió y no alcanzó a persistir\r\n      updatedAt: new Date().toISOString(),\r\n    };\r\n\r\n    localStorage.setItem('tareas', JSON.stringify(tareasGuardadas));\r\n    await this.mostrarToast('Tarea actualizada exitosamente', 'success');\r\n    this.router.navigate(['/detalle-tarea', this.tareaId]);\r\n  }\r\n\r\n  async mostrarToast(message: string, color: string = 'dark') {\r\n    (await this.toastCtrl.create({ message, duration: 1500, color })).present();\r\n  }\r\n}\r\n\r\n\r\n", "import { ComponentFixture, TestBed } from '@angular/core/testing';\r\nimport { EditarTareaPage } from './editar-tarea.page';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ToastController, NavController } from '@ionic/angular';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\ndescribe('EditarTareaPage', () => {\r\n  let component: EditarTareaPage;\r\n  let fixture: ComponentFixture<EditarTareaPage>;\r\n\r\n  beforeEach(async () => {\r\n    const routerSpy = jasmine.createSpyObj('Router', ['navigate']);\r\n    const toastSpy = jasmine.createSpyObj('ToastController', ['create']);\r\n    toastSpy.create.and.returnValue(Promise.resolve({ present: () => Promise.resolve() }));\r\n    const navCtrlSpy = jasmine.createSpyObj('NavController', ['navigateForward', 'navigateBack']);\r\n\r\n    const activatedRouteSpy = {\r\n      snapshot: {\r\n        paramMap: {\r\n          get: () => '1'\r\n        }\r\n      }\r\n    };\r\n\r\n    await TestBed.configureTestingModule({\r\n      imports: [EditarTareaPage, ReactiveFormsModule],\r\n      providers: [\r\n        { provide: Router, useValue: routerSpy },\r\n        { provide: ToastController, useValue: toastSpy },\r\n        { provide: ActivatedRoute, useValue: activatedRouteSpy },\r\n        { provide: NavController, useValue: navCtrlSpy }\r\n      ]\r\n    }).compileComponents();\r\n\r\n    fixture = TestBed.createComponent(EditarTareaPage);\r\n    component = fixture.componentInstance;\r\n\r\n    // Mock localStorage for ngOnInit\r\n    spyOn(localStorage, 'getItem').and.returnValue(JSON.stringify([{ id: 1, titulo: 'Test', descripcion: 'Test desc', color: 'sun' }]));\r\n\r\n    fixture.detectChanges();\r\n  });\r\n\r\n  it('should create', () => {\r\n    expect(component).toBeTruthy();\r\n  });\r\n});\r\n"],
  "mappings": "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",
  "names": ["editar_tarea_page_default", "init_editar_tarea_page", "EditarTareaPage", "init_editar_tarea_page"]
}
