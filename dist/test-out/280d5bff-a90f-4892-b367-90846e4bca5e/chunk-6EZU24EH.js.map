{"version":3,"sources":["node_modules/@ionic/core/dist/esm/config-mCdtaoPe.js"],"sourcesContent":["/*!\n * (C) Ionic http://ionicframework.com - MIT License\n */\nimport { j as printIonError } from './index-C8IsBmNU.js';\n\n/**\n * Does a simple sanitization of all elements\n * in an untrusted string\n */\nconst sanitizeDOMString = (untrustedString) => {\n    try {\n        if (untrustedString instanceof IonicSafeString) {\n            return untrustedString.value;\n        }\n        if (!isSanitizerEnabled() || typeof untrustedString !== 'string' || untrustedString === '') {\n            return untrustedString;\n        }\n        /**\n         * onload is fired when appending to a document\n         * fragment in Chrome. If a string\n         * contains onload then we should not\n         * attempt to add this to the fragment.\n         */\n        if (untrustedString.includes('onload=')) {\n            return '';\n        }\n        /**\n         * Create a document fragment\n         * separate from the main DOM,\n         * create a div to do our work in\n         */\n        const documentFragment = document.createDocumentFragment();\n        const workingDiv = document.createElement('div');\n        documentFragment.appendChild(workingDiv);\n        workingDiv.innerHTML = untrustedString;\n        /**\n         * Remove any elements\n         * that are blocked\n         */\n        blockedTags.forEach((blockedTag) => {\n            const getElementsToRemove = documentFragment.querySelectorAll(blockedTag);\n            for (let elementIndex = getElementsToRemove.length - 1; elementIndex >= 0; elementIndex--) {\n                const element = getElementsToRemove[elementIndex];\n                if (element.parentNode) {\n                    element.parentNode.removeChild(element);\n                }\n                else {\n                    documentFragment.removeChild(element);\n                }\n                /**\n                 * We still need to sanitize\n                 * the children of this element\n                 * as they are left behind\n                 */\n                const childElements = getElementChildren(element);\n                /* eslint-disable-next-line */\n                for (let childIndex = 0; childIndex < childElements.length; childIndex++) {\n                    sanitizeElement(childElements[childIndex]);\n                }\n            }\n        });\n        /**\n         * Go through remaining elements and remove\n         * non-allowed attribs\n         */\n        // IE does not support .children on document fragments, only .childNodes\n        const dfChildren = getElementChildren(documentFragment);\n        /* eslint-disable-next-line */\n        for (let childIndex = 0; childIndex < dfChildren.length; childIndex++) {\n            sanitizeElement(dfChildren[childIndex]);\n        }\n        // Append document fragment to div\n        const fragmentDiv = document.createElement('div');\n        fragmentDiv.appendChild(documentFragment);\n        // First child is always the div we did our work in\n        const getInnerDiv = fragmentDiv.querySelector('div');\n        return getInnerDiv !== null ? getInnerDiv.innerHTML : fragmentDiv.innerHTML;\n    }\n    catch (err) {\n        printIonError('sanitizeDOMString', err);\n        return '';\n    }\n};\n/**\n * Clean up current element based on allowed attributes\n * and then recursively dig down into any child elements to\n * clean those up as well\n */\n// TODO(FW-2832): type (using Element triggers other type errors as well)\nconst sanitizeElement = (element) => {\n    // IE uses childNodes, so ignore nodes that are not elements\n    if (element.nodeType && element.nodeType !== 1) {\n        return;\n    }\n    /**\n     * If attributes is not a NamedNodeMap\n     * then we should remove the element entirely.\n     * This helps avoid DOM Clobbering attacks where\n     * attributes is overridden.\n     */\n    if (typeof NamedNodeMap !== 'undefined' && !(element.attributes instanceof NamedNodeMap)) {\n        element.remove();\n        return;\n    }\n    for (let i = element.attributes.length - 1; i >= 0; i--) {\n        const attribute = element.attributes.item(i);\n        const attributeName = attribute.name;\n        // remove non-allowed attribs\n        if (!allowedAttributes.includes(attributeName.toLowerCase())) {\n            element.removeAttribute(attributeName);\n            continue;\n        }\n        // clean up any allowed attribs\n        // that attempt to do any JS funny-business\n        const attributeValue = attribute.value;\n        /**\n         * We also need to check the property value\n         * as javascript: can allow special characters\n         * such as &Tab; and still be valid (i.e. java&Tab;script)\n         */\n        const propertyValue = element[attributeName];\n        /* eslint-disable */\n        if ((attributeValue != null && attributeValue.toLowerCase().includes('javascript:')) ||\n            (propertyValue != null && propertyValue.toLowerCase().includes('javascript:'))) {\n            element.removeAttribute(attributeName);\n        }\n        /* eslint-enable */\n    }\n    /**\n     * Sanitize any nested children\n     */\n    const childElements = getElementChildren(element);\n    /* eslint-disable-next-line */\n    for (let i = 0; i < childElements.length; i++) {\n        sanitizeElement(childElements[i]);\n    }\n};\n/**\n * IE doesn't always support .children\n * so we revert to .childNodes instead\n */\n// TODO(FW-2832): type\nconst getElementChildren = (el) => {\n    return el.children != null ? el.children : el.childNodes;\n};\nconst isSanitizerEnabled = () => {\n    var _a;\n    const win = window;\n    const config = (_a = win === null || win === void 0 ? void 0 : win.Ionic) === null || _a === void 0 ? void 0 : _a.config;\n    if (config) {\n        if (config.get) {\n            return config.get('sanitizerEnabled', true);\n        }\n        else {\n            return config.sanitizerEnabled === true || config.sanitizerEnabled === undefined;\n        }\n    }\n    return true;\n};\nconst allowedAttributes = ['class', 'id', 'href', 'src', 'name', 'slot'];\nconst blockedTags = ['script', 'style', 'iframe', 'meta', 'link', 'object', 'embed'];\nclass IonicSafeString {\n    constructor(value) {\n        this.value = value;\n    }\n}\n\nconst setupConfig = (config) => {\n    const win = window;\n    const Ionic = win.Ionic;\n    // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n    if (Ionic && Ionic.config && Ionic.config.constructor.name !== 'Object') {\n        return;\n    }\n    win.Ionic = win.Ionic || {};\n    win.Ionic.config = Object.assign(Object.assign({}, win.Ionic.config), config);\n    return win.Ionic.config;\n};\nconst getMode = () => {\n    var _a;\n    const win = window;\n    const config = (_a = win === null || win === void 0 ? void 0 : win.Ionic) === null || _a === void 0 ? void 0 : _a.config;\n    if (config) {\n        if (config.mode) {\n            return config.mode;\n        }\n        else {\n            return config.get('mode');\n        }\n    }\n    return 'md';\n};\nconst ENABLE_HTML_CONTENT_DEFAULT = false;\n\nexport { ENABLE_HTML_CONTENT_DEFAULT as E, IonicSafeString as I, sanitizeDOMString as a, getMode as g, setupConfig as s };\n"],"mappings":"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","names":[],"x_google_ignoreList":[0]}